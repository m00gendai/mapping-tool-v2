<!DOCTYPE html>
<html lang="en">
<head>
    <title>AIM Mapping Tool</title>
    <meta charset="UTF-8" />
    <meta name="description" content="Mapping Tool for AIM Services Switzerland" />
    <meta name="author" content="Marcel Weber" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name=”robots” content=”noindex,nofollow”>

    <link rel="icon" type="image/x-icon" href="./Assets/favicon.png">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mwasil/Leaflet.Rainviewer/leaflet.rainviewer.css"/>
    <link rel="stylesheet" href="https://ppete2.github.io/Leaflet.PolylineMeasure/Leaflet.PolylineMeasure.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
    <link rel="stylesheet" href="leaflet.groupedlayercontrol.min.css">
    <link rel="stylesheet" href="styles.css">
    
    <script src="script.js" type="module" defer></script>
    <script src="queryFunctions.js" type="module" defer></script>
    <script src="coordinateConversions.js" type="module" defer></script>
    <script src="routeDeconstructor.js" type="module" defer"></script>
    <script src="keys.js" type="module" defer></script>
    <script src="configs.js" type="module" defer></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin="" defer></script>
    <script src="https://cdn.jsdelivr.net/gh/mwasil/Leaflet.Rainviewer/leaflet.rainviewer.js" defer></script>
    <script src="https://ppete2.github.io/Leaflet.PolylineMeasure/Leaflet.PolylineMeasure.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js" defer></script>
    <script src="https://kit.fontawesome.com/369620f5d0.js" crossorigin="anonymous" defer></script>
    <script src="https://lib.arvancloud.com/leaflet-polylinedecorator/1.1.0/leaflet.polylineDecorator.min.js" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script>
    <script src="L.KML.js" defer></script>
    <script src='//unpkg.com/leaflet-arc/bin/leaflet-arc.min.js'defer></script>
    <script src="leaflet.groupedlayercontrol.min.js" defer></script>
    <script src="/EAD_Data/EAD_AD_ALL.js" defer></script>
    <script src="/EAD_Data/EAD_WPT_ALL.js" defer></script>
    <script src="/EAD_Data/EAD_NAV_ALL.js" defer></script>
    <script src="./Data/airspaces.js" type="module" defer></script>
    <script src="./Data/countryShapes.js" defer></script>
    <script src="./Data/countryAronlineLink.js" defer></script>
    <script src="./Data/droneRestrictions.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js" defer></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9XTDGNPBLY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'G-9XTDGNPBLY');
    </script>    
</head>
<body>
    <div id="map"></div>
    <main id="mapperContainer">
        <aside id="toolHalf">
            <div id="tabContainer">
                <nav id="tabRow"></nav>
                <article id="tabContentContainer">
                    <div id="tabContent">
                        <div id="tabContentInner">
                            <section id="searchOnMap">
                                <div id="mapAllContainer" class="mapContainers">
                                    <textarea class="queryBoxes" id="mapAll" placeholder="-LSZA0700&#10;-N0160VFR W LUINO BRISSAGO&#10;-LSZL0030"></textarea>
                                    <button class="queryButtons" id="mapAllButton">Entire Route</button>
                                </div>
                                <div id="mapLociContainer" class="mapContainers">
                                    <textarea class="queryBoxes" id="mapLoci" placeholder="LSZH LSGG KJFK"></textarea>
                                    <button class="queryButtons" id="mapLociButton">Loci</button>
                                </div>
                                <div id="mapPlaceContainer" class="mapContainers">
                                    <textarea class="queryBoxes" id="mapPlace" placeholder="Hallau,Reichenbach im Kandertal,Hinwil"></textarea>
                                    <button class="queryButtons" id="mapPlaceButton">Place</button>
                                </div>
                                <div id="mapNavaidContainer" class="mapContainers">
                                    <textarea class="queryBoxes" id="mapNavaid" placeholder="ZUE TRA KLO"></textarea>
                                    <button class="queryButtons" id="mapNavaidButton">Navaid</button>
                                </div>
                                 <div id="mapRepContainer" class="mapContainers">
                                    <textarea class="queryBoxes" id="mapRep" placeholder="RINLI LS201 MILPA"></textarea>
                                    <button class="queryButtons" id="mapRepButton">Waypoint</button>
                                </div>
                                <div id="mapCoordsContainer" class="mapContainers">
                                    <textarea class="queryBoxes" id="mapCoords" placeholder="4620N00733E 470126N0080129E"></textarea>
                                    <button class="queryButtons" id="mapCoordsButton">Coordinates</button>
                                </div>
                                <div id="mapBrgDistContainer" class="mapContainers">
                                    <textarea class="queryBoxes" id="mapBrgDist" placeholder="TRA180010 SOSON135075"></textarea>
                                    <button class="queryButtons" id="mapBrgDistButton">Bearing/<wbr>Distance from Point</button>
                                </div>
                                <mark>Not to be used for navigation purposes!</mark>
                                <h4>Search entire Route</h4>
                                Copy the entire route of a FPL in here including DEP and DEST. An extremely complicated and advanced algorithm will automatically detect LOCIs, Places, Navaids, Waypoints, Bearing/Distance from Navaid/Waypoint and Coordinates and plot them.<br>
                                <br>
                                <code>-LSZA0700</code><br>
                                <code>-N0160VFR W LUINO BRISSAGO</code><br>
                                <code>-LSZL0030</code>
                                <br>
                                <h4>Search Loci:</h4>
                                <ul>
                                    <li>Worldwide ICAO Location Indicator search</li>
                                    <li>Multiple Location Indicators separated by space</li>
                                    <li>Case insensitive</li>
                                </ul>
                                <code>LSZH</code> or <code>LSZH kjfk fabl</code><br>
                                <br>
                                <h4>Search Place:</h4>
                                <ul>
                                    <li>Routed via google Maps, so cities, mountains, lakes, etc are queried</li>
                                    <li>Queries separated by comma (,)</li>
                                    <li>Case insensitive</li>
                                    <li>Location bias is Switzerland</li>
                                </ul>
                                <code>Hallau</code> or <code>hallau, Bad Zurzach,HEGNAU</code><br>
                                <br>
                                <h4>Search Navaids:</h4>
                                <ul>
                                    <li>Worldwide Navaid Indicator search</li>
                                    <li>Multiple Navaids separated by space</li>
                                    <li>Case insensitive.</li>
                                </ul>
                                <code>ZUE</code> or <code>klo zue TRA</code><br>
                                <br>
                                <h4>Search Waypoints:</h4>
                                <ul>
                                    <li>Worldwide Waypoint (5 letter) search</li>
                                    <li>Including Swiss LFN Waypoints</li>
                                    <li>Multiple Waypoints separated by space</li>
                                    <li>Case insensitive.</li>
                                </ul>
                                <code>RAMKOK</code> or <code>songi LS201 Lebso</code><br>
                                <br>
                                <h4>Search Coordinates:</h4>
                                <ul>
                                    <li>Coordinate search</li>
                                    <li>Single or multiple</li>
                                    <li>Case insensitive</li>
                                    <li>Plotted coordinates will be displayed as WGS84 (as queried) and decimal coordinates</li>
                                </ul>
                                Format either <code>4701N00745E</code> or <code>470140N0074530E</code>.<br>
                                Mixed format allowed <code>{nnnn}N|S{nnnnn}E|W</code> or <code>{nnnnnn}N|S{nnnnnnn}E|W</code><br>
                                Ignores anything else, so <code>4701N00745E/n0150F090 DCT SPR DCT 471233n0080125e</code> is valid and only the coordinates will be plotted.<br>
                                <br>
                                <h4>Search Bearing/Distance from Point:</h4>
                                <ul>
                                    <li>Bearing in Degrees (0-360)</li>
                                    <li>Distance in Nautical Miles (0-999)</li>
                                    <li>Either from Navaid or Waypoint</li>
                                    <li>Case insensitive</li>
                                    <li>Single or multiple</li>
                                </ul>
                                Format either <code>{NAV}{BRG}{DIST}</code> or <code>{WAYPT}{BRG}{DIST}</code>.<br>
                                <code>TRA123050</code> for 50 Nautical Miles, 123° from TRA or <code>soson007226 Ramok226007</code> for 7 Nautical Miles, 226° from SOSON / 226 Nautical Miles, 7° from RAMOK.
                                <br>
                                <hr>
                            </section>
                            <section id="coordinateConversion">
                                <div class="inputContainer">
                                Convert Coordinates from one format to the other and plot the result on the map
                                    <h4>DEG / MIN / SEC to Decimal DEG </h4>
                                    <br>
                                    <div class="inputCoordinateConversionContainer">
                                        <div class="inputCoordinateConversionContainerInner">
                                            <div class="minutesns">
                                                <input id="nsmindeg" class="coordinatesSinglePairs" placeholder="46" maxlength="2">
                                                <input id="nsminmin" class="coordinatesSinglePairs" placeholder="48" maxlength="2">
                                                <input id="nsminsec" class="coordinatesSinglePairs" placeholder="04" maxlength="2">
                                                <select id="ns" class="coordinatesSinglePairs" >
                                                    <option>N</option>
                                                    <option>S</option>
                                                </select>
                                            </div>
                                            <div class="minutesew">
                                                <input id="ewmindeg" class="coordinatesSinglePairs" placeholder="008" maxlength="3">
                                                <input id="ewminmin" class="coordinatesSinglePairs" placeholder="13" maxlength="2">
                                                <input id="ewminsec" class="coordinatesSinglePairs" placeholder="36" maxlength="2">
                                                <select id="ew" class="coordinatesSinglePairs" >
                                                    <option>E</option>
                                                    <option>W</option>
                                                </select>
                                            </div>
                                        </div>
                                        <button id="mincalc" class="coordinateConversionButton">Convert</button>
                                        <div id="result" class="coordresult"></div>
                                    </div>
                                    <h4>DEG / Decimal MIN / SEC to DEG / MIN / SEC</h4>
                                    <br>
                                    <div class="inputCoordinateConversionContainer">
                                        <div class="inputCoordinateConversionContainerInner">
                                            <div class="minutesns">
                                                <input id="nsmindecdeg" class="coordinatesSinglePairs" placeholder="46" maxlength="2">
                                                <input id="nsmindecmin" class="coordinatesDecimalMin" placeholder="48.066667" >
                                                <select id="ns3" class="coordinatesSinglePairs" >
                                                    <option>N</option>
                                                    <option>S</option>
                                                </select>
                                            </div>
                                            <div class="minutesew">
                                                <input id="ewmindecdeg" class="coordinatesSinglePairs" placeholder="008" maxlength="3">
                                                <input id="ewmindecmin" class="coordinatesDecimalMin" placeholder="13.600000" >
                                                <select id="ew3" class="coordinatesSinglePairs" >
                                                    <option>E</option>
                                                    <option>W</option>
                                                </select>
                                            </div>
                                        </div>
                                        <button id="mindeccalc" class="coordinateConversionButton">Convert</button>
                                        <div id="result2" class="coordresult"></div>
                                    </div>
                                    <h4>Decimal DEG to DEG / MIN / SEC</h4>
                                    <br>
                                    <div class="inputCoordinateConversionContainer">
                                        <div class="inputCoordinateConversionContainerInner">
                                            <div class="decimalns">
                                                <input id="nsdec" class="coordinatesDecimalDeg" placeholder="46.8011">
                                                <select id="ns2" class="coordinatesSinglePairs" >
                                                    <option>N</option>
                                                    <option>S</option>
                                                </select>
                                            </div>
                                            <div class="decimalew">
                                                <input id="ewdec" class="coordinatesDecimalDeg" placeholder="008.2265">
                                                <select id="ew2" class="coordinatesSinglePairs" >
                                                    <option>E</option>
                                                    <option>W</option>
                                                </select>
                                            </div>
                                        </div>
                                        <button id="deccalc" class="coordinateConversionButton">Convert</button>
                                        <div id="result1" class="coordresult"></div>
                                    </div>
                                </div>
                                <hr>
                            </section>
                            <section id="circle">
                                <div id="speedContainer" class="plotCircleInputs">
                                    <label for="speedForCircle">Speed in Knots:</label><input id="speedForCircle" placeholder="100">
                                </div>
                                <div id="speedTimeContainer" class="plotCircleInputs">
                                    <label for="timeOfCircle">Time for Distance:</label><span id="timeOfCircle"></span>
                                </div>
                                <h4>Plot Distance</h4>
                                <ol>
                                    <li>Plot a line with the &#8614; control</li>
                                    <li>Bearing and Distance are displayed</li>
                                        <ul>
                                            <li>If speed (in Knots) is entered, the time for the distance is displayed</li>
                                        </ul>
                                </ol>
                                The line accounts for the curvature of the earth.<br>
                                Multiple lines with intermediate points can be plotted.<br>
                                Press <kbd>ESC</kbd> once to cancel the current operation, twice to cancel line plotting.
                                <br>
                                <h4>Plot Coverage Area</h4>
                                <ol>
                                    <li>Enter speed (in Knots)</li>
                                    <li>Plot a line with the &#8614; control</li>
                                    <li>On click at the desired time, a circle of the coverage area is displayed</li>
                                </ol>
                                The line and circle account for the curvature of the earth.<br>
                                Only one circle at a time can be plotted, its suggested to start a new line on a blank canvas for a new circle.<br>
                                Press <kbd>ESC</kbd> once to cancel the current operation, twice to cancel line plotting.
                                <h4>Measure Distance and Time between Markers</h4>
                                Doubleclick a marker, then doubleclick another to show a line between them.<br>
                                In the opened dialog window, the distance in Nautical Miles is displayed.<br>
                                Enter a speed in Knots to see the time needed for the distance.<br>
                                Click more markers to extend the line.<br>
                                Distance and time will be displayed between the current and last marker as well as the total distance and time from the starting marker to the current one.
                            </section>
                            <section id="baseMaps">
                                <div id="mapChoiceTileContainer">
                                    <div id="mapChoiceTileContainerInner"></div>
                                </div>
                                <hr>
                            </section>
                            <section id="about">
                                <div id="mapToolAboutContent">
                                    AIM Mapping Tool is an open source application developed as a supplementary tool for AIM Services Switzerland, specifically to aid in plotting VFR flight plan routes.
                                    Although it features official Swiss federal map and Eurocontrol data, it is not an official application and thus shall not be used for navigational purposes.
                                    <br><br>
                                    A complete documentation can be found in the <a href="https://github.com/m00gendai/mapping-tool-v2" target="_blank">github repository.</a>
                                    <br><br>
                                    A changelog, detailing progress, bugtracking, planned features etc can be found on <a href="https://trello.com/b/yzfLBL7h/aim-mapping-tool" target="_blank">Trello.</a><br>
                                    <h4>Coordinate Precision</h4>
                                    <ul>
                                        <li>Coordinate conversion based on WGS84 coordinates</li>
                                        <li>Accurate to 1/10000 of a degree (~11.1m) with slight variations of +/- 4m due to rounding operations</li>
                                        <li>0 degrees are treated as positive 0.00000001 degrees, which is an accuracy deviation of 1.11mm.</li>
                                    </ul>
                                    <h4>Base Map Data Source</h4>
                                    <ul>
                                        <li>Base, Satellite, Open Street and swisstopo map via <a href="https://www.maptiler.com/" target="_blank">maptiler</a></li>
                                        <li>National Geograpic and NASA/ESRI map via ArcGIS Web Map Service</li>
                                    </ul>
                                    <h4>Overlay Data Source</h4>
                                    <ul>
                                        <li>Swiss VFR Chart and Drone Areas via <a href="https://www.geo.admin.ch/en/geo-services/geo-services/portrayal-services-web-mapping/web-map-tiling-services-wmts.html" target="_blank">swisstopo</a></li>
                                        <li>French VFR Chart via <a href="https://geoservices.ign.fr/" target="_blank">IGN</a></li>
                                        <li>German VFR Chart via <a href="https://www.dfs.de/dfs_homepage/en/Services/Customer%20Relations/INSPIRE/" target="_blank">DFS</a></li>
                                        <li>Airspace layers (CTR, TMA) via <a href="https://www.openaip.net/" target="_blank">openAIP.net</a>, custom linted & validated (and sometimes fixed) by <a href="www.linkedin.com/in/marcel-weber-3a05a61bb" target="_blank" title="See LinkedIn Profile">Marcel Weber</a></li>
                                        <li>Airspace layer Switzerland from <a href="https://www.skyguide.ch/services/aeronautical-information-management" target="_blanK">skyguide AIM Services</a></li>
                                        <li>Airspace layers (FIR) by <a href="www.linkedin.com/in/marcel-weber-3a05a61bb" target="_blank" title="See LinkedIn Profile">Marcel Weber</a></li>
                                        <li>VFR Reporting Points Slovenia & Croatia by <a href="www.linkedin.com/in/marcel-weber-3a05a61bb" target="_blank" title="See LinkedIn Profile">Marcel Weber</a></li>
                                        <li>LSAG/LSAZ Boundary by <a href="www.linkedin.com/in/marcel-weber-3a05a61bb" target="_blank" title="See LinkedIn Profile">Marcel Weber</a></li>
                                        <li>Italy ARO Boundary by <a href="www.linkedin.com/in/marcel-weber-3a05a61bb" target="_blank" title="See LinkedIn Profile">Marcel Weber</a></li>
                                        <li>Rainviewer from <a href="https://github.com/mwasil/Leaflet.Rainviewer" target="_blank">mwasil</a></li>
                                    </ul>
                                    <h4>POI Data Source</h4>
                                    <ul>
                                        <li>Place names and coordinates via <a href="https://developers.google.com/maps/documentation/javascript/places" target="_blank">google Maps JavaScript API</a></li>
                                        <li>ICAO Location Indicators, Navaids and Waypoints from <a href="https://www.ead.eurocontrol.int/cms-eadbasic/opencms/en/login/ead-basic/" target="_blank">Eurocontrol EAD</a></li>
                                    </ul>
                                    <h4>Attributions</h4>
                                        favicon by <a href="https://www.flaticon.com/free-icons/globe" target="_blank" title="globe icons">vectorsmarket15 - Flaticon</a><br>
                                        Markers by <a href="https://www.flaticon.com/packs/location-59" target="_blank" title="Location Pack">Freepik - Flaticon</a><br>
                                        Flag Markers by <a href="https://www.flaticon.com/packs/country-flags" target="_blank" title="COuntry Flags Pack">Freepik - Flaticon</a><br>
                                        Marker remove & Line remove by <a href="https://www.flaticon.com/packs/location-55" target="_blank" title="Location Pack">Freepik - Flaticon</a></br>
                                        Popup remove by <a href="https://www.flaticon.com/packs/web-essentials-3" target="_blank" title="Web Essentials Pack">Freepik - Flaticon</a></br>
                                    <br>
                                    <h4>Legal</h4>
                                        &copy; 2021-<span id="currentYear"></span> <a href="www.linkedin.com/in/marcel-weber-3a05a61bb" target="_blank" title="See LinkedIn Profile">Marcel Weber</a> for AIM Services Switzerland<br>
                                        Source code on <a href="https://github.com/m00gendai/mapping-tool-v2" target="_blank">github</a><br>
                                    <br>
                                </div>
                                <hr>
                            </section>
                        </div>
                    </div>
                </article>
            </div>
        </aside>
        <article id="mapHalf">
            <div id="mapid"></div>
            <div id="cursorTooltip"></div>
            <article id="mapOptionsBar">
                <button class="mapOptions" id="clearMarker" title="Clear Markers"></button>
                <button class="mapOptions"  id="clearPopups" title="Clear Popups"></button>
                <button class="mapOptions"  id="clearLine" title="Clear Lines"></button>
                <button class="mapOptions"  id="clearAll" title="Clear All"></button>
              <button class="mapOptions"  id="toggleVFR" title="Toggle VFR Chart Layers">
                    <div id="vfrContainer">
                        <div class="vfrContainerInner" id="vfrCH">
                            Switzerland
                        </div>
                        <div class="vfrContainerInner" id="vfrFrance">
                            France
                        </div>
                        <div class="vfrContainerInner" id="vfrGermany">
                            Germany
                        </div>
                    </div>
                    VFR Charts
                </button>
                <button class="mapOptions"  id="toggleDrone" title="Toggle Swiss Drone Restriction Layer">Drone Areas</button>
                <button class="mapOptions"  id="focusSwitzerland" title="Focus Switzerland"></button>
                <button class="mapOptions"  id="focusEurope" title="Focus Europe"></button>
                <button class="mapOptions"  id="focusWorld" title="Focus World"></button>
            </article>
            <article id="mapDistanceBar">
                <section id="timeInputContainer">
                    <div id="timeLabel">Speed in Knots:</div>
                    <div id="timeInput">
                        <input id="speedInput" placeholder="100">
                    </div>
                </section>
                <table>
                    <thead>
                        <tr>
                            <th>DEP</th>
                            <th>DIST</th>
                            <th>DEST</th>
                            <th>TIME</th>
                            <th>TOTAL DIST</th>
                            <th>TOTAL TIME</th>
                        </tr>
                    </thead>
                    <tbody id="distTable"></tbody>
                </table>
                <button id="expandMapDistanceBar"><i class="fa-solid fa-chevron-down"></i></button>
            </article>
        </article>
    </main>
</body>
</html>
